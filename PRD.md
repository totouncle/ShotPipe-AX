# ShotPipe - AI 생성 파일 자동화 Shotgrid 업로드 솔루션 최종 PRD

## 제품 개요
ShotPipe는 AI 서비스로 생성된 로컬 파일들을 자동으로 처리하고 Shotgrid에 효율적으로 업로드하는 크로스 플랫폼 솔루션입니다. 파일 처리와 업로드 과정을 모듈식으로 분리하여 안정적인 워크플로우를 제공합니다.

## 핵심 기능

### 1. 파일 가공 모듈
- **파일 스캐닝**: 지정된 폴더에서 이미지/비디오 파일 자동 탐색
- **메타데이터 관리**: 원본 파일의 메타데이터 추출 및 보존
- **네이밍 규칙 적용**: `[시퀀스]_c001_[task]_v0001` 형식으로 파일명 구조화
- **자동 태스크 할당**: 파일 유형 기반 자동 태스크 할당(이미지: txtToImage, 영상: imgToVideo)
- **버전 관리**: 동일 시퀀스/샷/태스크에 대한 버전 자동 증가
- **중간 저장소**: 처리된 파일 정보를 CSV/JSON으로 저장

### 2. Shotgrid 업로드 모듈
- **API 연동**: shotgun_api3/pyshotgrid 라이브러리 활용
- **엔티티 관리**: 프로젝트, 시퀀스, 샷 자동 생성/매핑
- **파일 업로드**: 단일 파일 업로드 처리 및 진행 상태 추적
- **에러 처리**: 실패한 업로드 로깅 및 재시도 메커니즘

## 사용자 인터페이스 설계

### 1. 모듈식 UI 구조
- **분리된 탭 인터페이스**: 
  - 탭 1: "파일 처리" - 파일 스캔, 메타데이터 추출, 네이밍 변환
  - 탭 2: "Shotgrid 업로드" - 처리된 파일 목록 표시, 업로드 실행

### 2. 파일 처리 탭
- 소스 폴더 선택 기능
- 파일 스캔 버튼 및 진행 상태 표시
- 스캔된 파일 목록 (파일명, 유형, 크기, 상태)
- 처리 옵션 설정 (네이밍 규칙, 메타데이터 옵션)
- **자동 할당된 태스크 수정 기능**: 사용자가 개별 파일 또는 다중 선택 파일의 태스크 유형 변경 가능
- 처리 실행 버튼
- 처리 결과 저장 경로 지정

### 3. Shotgrid 업로드 탭
- 처리된 파일 데이터(CSV/JSON) 로드 버튼
- Shotgrid 연결 설정 (서버 URL, 인증 정보)
- 업로드 대상 파일 목록 및 선택 기능
- 업로드 실행 버튼 및 진행 상태 표시
- 업로드 결과 로그 및 오류 보고

### 4. 프로젝트 관리
- 프로젝트 선택/입력 필드
- 이전에 사용한 프로젝트 드롭다운 메뉴
- 프로젝트별 설정 저장 기능

## 기술 요구사항
- **언어**: Python 3.7+ (Windows/Mac 호환)
- **라이브러리**: shotgun_api3, exiftool-py, FFmpeg-python
- **UI 프레임워크**: PyQt5/Tkinter
- **설정 관리**: JSON/YAML 설정 파일

## 자동 태스크 할당 시스템
- **기본 매핑 규칙**:
  - 이미지 파일(.png, .jpg, .jpeg 등): `txtToImage`
  - 영상 파일(.mp4, .mov, .avi 등): `imgToVideo`
- **사용자 커스터마이징**: UI에서 자동 할당된 태스크 직접 수정 가능
- **설정 파일 기반**: 확장 가능한 매핑 규칙 시스템으로 새로운 파일 유형 및 태스크 추가 지원

## 파일 네이밍 규칙
- **기본 형식**: `[시퀀스]_c001_[task]_v0001`
  - 예: `s01_c001_txtToImage_v0001.png`
- **시퀀스 표기**: 's01', 's02' 등으로 표현
- **샷 번호**: 'c001', 'c002' 등으로 표현
- **태스크 코드**: 'txtToImage', 'imgToVideo' 등의 정의된 코드
- **버전 관리**: 'v0001'부터 자동 증가
- **프로젝트 정보**: 파일명에 포함하지 않고 별도 메타데이터로 관리

## 데이터 흐름
1. 로컬 폴더에서 AI 생성 파일 스캔
2. 네이밍 규칙 적용 및 메타데이터 추출
3. 파일 유형 기반 자동 태스크 할당
4. 사용자 검토 및 필요시 태스크 수정
5. 중간 저장소(CSV/JSON)에 정보 저장
6. Shotgrid API를 통해 엔티티 확인/생성
7. 파일 업로드 및 매핑
8. 결과 로깅

## Shotgrid 업로드 로직
1. **연결 및 인증**: 서버 URL, 스크립트 이름, API 키로 인증
2. **엔티티 계층 관리**:
   - 프로젝트 확인/생성
   - 시퀀스 확인/생성
   - 샷 확인/생성
   - 태스크 확인/생성
3. **버전 관리**:
   - 버전 엔티티 생성
   - 버전 번호 자동 증가
4. **파일 업로드**:
   - 이미지/비디오 파일 적절한 메서드로 업로드
   - 메타데이터 Shotgrid 커스텀 필드에 저장
5. **에러 처리**:
   - 네트워크 오류 자동 재시도
   - 실패 로그 기록
6. **비동기 처리**:
   - 멀티스레딩으로 다중 파일 업로드 최적화

## 구현 단계
1. 파일 가공 모듈 개발 (1주)
2. UI 기본 프레임워크 구현 (3일)
3. 자동 태스크 할당 시스템 개발 (2일)
4. Shotgrid API 연결 및 엔티티 관리 (1주)
5. 파일 업로드 기능 구현 (1주)
6. 에러 처리 및 로깅 시스템 (3일)
7. 통합 테스트 및 최적화 (3일)

## 성능 고려사항
- 멀티스레딩/비동기 처리로 다중 파일 업로드 최적화
- 대용량 파일을 위한 청크 업로드 지원
- 네트워크 오류 시 자동 재시도 로직

## 미래 확장성
- 다양한 AI 서비스 지원을 위한 플러그인 아키텍처
- 커스텀 매핑 규칙 확장 기능
- 자동화된 스케줄링 지원
- 추가 태스크 유형 지원 (새로운 AI 생성 파일 유형에 따라)

## 제약사항
- Shotgrid API는 파일 업로드 배치 처리를 지원하지 않음
- 대용량 파일은 업로드 시간이 길어질 수 있음
- Shotgrid 서버 성능에 따른 처리 속도 제한

## 사용자 경험
- 직관적인 폴더 선택 및 업로드 설정
- 각 모듈의 독립적 실행으로 단계별 검증 가능
- 실시간 진행 상황 모니터링
- 태스크 자동 할당 및 간편한 수동 조정
- 오류 발생 시 명확한 피드백 제공
- 업로드 결과 요약 보고서

이 최종 PRD는 ShotPipe 솔루션의 개발과 구현을 위한 종합적인 가이드라인을 제공합니다. 실제 개발 과정에서 사용자 피드백과 기술적 요구에 따라 세부 사항이 조정될 수 있습니다.


## Test file 들이 있는 경로야. 여기 기준으로 테스트하면되. 
/Users/onset/stock_business/ShotPipe/LIG

