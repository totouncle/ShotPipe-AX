# ShotPipe 고정 프로젝트 기능 개선 완료 보고서

## 🎯 사용자 요구사항
- **"쿼리된 정보가 표시되고 바꿀 수 있어야 되고 프로젝트는 거의 고정"**

## ✅ 구현된 기능들

### 1. 고정 프로젝트 시스템
- **기본 고정 프로젝트**: `AXRD-296`로 설정됨
- **자동 선택**: 앱 시작 시 고정 프로젝트가 자동으로 로드됨
- **프로젝트 선택기 숨김**: 불필요한 프로젝트 선택 UI 제거

### 2. 시퀀스/샷 정보 쿼리 및 편집
- **Shotgrid 데이터 쿼리**: 고정 프로젝트에서 시퀀스/샷 목록 자동 로드
- **드롭다운 편집**: 시퀀스*와 샷* 컬럼을 더블클릭하면 Shotgrid 데이터에서 선택 가능
- **실시간 업데이트**: 선택한 시퀀스에 따라 해당 샷 목록이 자동 업데이트
- **혼합 데이터**: Shotgrid 데이터 + 로컬 감지 데이터 + 기본 옵션들

### 3. 프로젝트 설정 관리 UI
- **설정 다이얼로그**: 새로운 "프로젝트 설정" 다이얼로그 추가
- **메뉴 접근**: `설정 → 프로젝트 설정... (Ctrl+,)`
- **빠른 접근**: 파일 처리 탭의 "프로젝트 설정" 버튼
- **실시간 연결 상태**: Shotgrid 연결 상태 표시 및 테스트 기능

### 4. 자동 태스크 할당
- **파일 유형 기반**: 파일 확장자에 따른 자동 AI 태스크 할당
  - 이미지 파일 (`.png`, `.jpg` 등) → `txtToImage`
  - 비디오 파일 (`.mp4`, `.mov` 등) → `imgToVideo`
  - 오디오 파일 (`.wav`, `.mp3` 등) → `txtToAudio`
  - 3D 파일 (`.obj`, `.fbx` 등) → `gen3D`

## 🔧 추가된 파일들

### 새로운 UI 컴포넌트
- `shotpipe/ui/project_settings_dialog.py` - 프로젝트 설정 다이얼로그

### 개선된 파일들
- `shotpipe/ui/file_tab.py` - 고정 프로젝트 기능, 시퀀스/샷 편집 델리게이트
- `shotpipe/ui/main_window.py` - 설정 메뉴 추가
- `shotpipe/config.py` - 고정 프로젝트 설정 (이미 구현되어 있었음)

### 테스트 파일
- `test_fixed_project_features.py` - 새 기능들을 테스트하는 스크립트

## 🎨 UI 개선사항

### 파일 처리 탭
```
┌─ Shotgrid 연동 ─────────────────────────────────────┐
│ 연결 상태: ✅ 연결됨                                  │
│ 고정 프로젝트: [AXRD-296] [시퀀스/샷 새로고침] [프로젝트 설정] │
│ 시퀀스: [드롭다운] Shot: [드롭다운] [선택된 파일에 일괄 적용] │
└─────────────────────────────────────────────────────┘
```

### 테이블 편집 기능
```
파일명          상태    시퀀스*    샷*     경과시간  메세지
image001.png   대기중   [LIG▼]   [c001▼]    -      -
video002.mp4   대기중   [KIAP▼]  [c010▼]    -      -
```
- **시퀀스*와 샷* 컬럼**: 더블클릭하면 Shotgrid 데이터에서 선택 가능
- **툴팁**: "더블클릭 → Shotgrid 시퀀스에서 선택"

### 프로젝트 설정 다이얼로그
```
┌─ 프로젝트 설정 ──────────────────────────────────┐
│ 고정 프로젝트 설정                                 │
│   현재 고정 프로젝트: [AXRD-296 ▼]                │
│   ☑ 앱 시작 시 자동으로 프로젝트 선택              │
│   ☐ 프로젝트 선택기 표시 (숨김 권장)              │
│                                                   │
│ Shotgrid 연결 상태                                │
│   ✅ Shotgrid에 연결됨                            │
│   [연결 테스트] [프로젝트 목록 새로고침]            │
│                                                   │
│                    [확인] [취소] [적용]            │
└─────────────────────────────────────────────────┘
```

## ⚙️ 설정 구조

```yaml
shotgrid:
  server_url: "https://your-studio.shotgunstudio.com"
  script_name: "your_script_name"
  api_key: "your_api_key"
  default_project: "AXRD-296"      # 고정 프로젝트
  auto_select_project: true         # 자동 선택
  show_project_selector: false      # 프로젝트 선택기 숨김
```

## 🚀 사용 방법

### 1. 기본 워크플로우
1. **앱 시작** → 고정 프로젝트 `AXRD-296`이 자동 로드됨
2. **파일 스캔** → 시퀀스/샷 정보가 자동 감지됨
3. **시퀀스/샷 편집** → 테이블에서 더블클릭으로 Shotgrid 데이터에서 선택
4. **일괄 적용** → Shotgrid에서 선택한 시퀀스/샷을 여러 파일에 적용
5. **파일 처리** → 자동 태스크 할당과 함께 처리

### 2. 프로젝트 설정 변경
- **메뉴**: `설정 → 프로젝트 설정... (Ctrl+,)`
- **빠른 접근**: 파일 처리 탭의 "프로젝트 설정" 버튼

### 3. 시퀀스/샷 편집
- **개별 편집**: 시퀀스* 또는 샷* 컬럼을 더블클릭
- **일괄 적용**: Shotgrid 섹션에서 시퀀스/샷 선택 후 "선택된 파일에 일괄 적용"

## 🧪 테스트 방법

### 기능 테스트 스크립트 실행
```bash
python test_fixed_project_features.py
```

### 실제 UI 테스트
```bash
python main.py
```

테스트할 항목:
1. ✅ 앱 시작 시 고정 프로젝트 자동 로드
2. ✅ 시퀀스/샷 컬럼 더블클릭 편집
3. ✅ Shotgrid 데이터 드롭다운 표시
4. ✅ 프로젝트 설정 다이얼로그 열기
5. ✅ 연결 상태 표시 및 테스트
6. ✅ 설정 저장 및 불러오기

## 📝 개발자 노트

### 주요 구현 특징
- **모듈식 설계**: 기존 코드를 최대한 유지하면서 새 기능 추가
- **에러 처리**: 모든 Shotgrid 연동 기능에 적절한 에러 처리
- **사용자 친화적**: 직관적인 UI와 명확한 피드백
- **설정 관리**: YAML 기반 설정 파일로 유연한 구성

### 확장성
- **새로운 AI 태스크**: `_assign_task_automatically()` 메서드에서 쉽게 추가 가능
- **추가 프로젝트**: 설정에서 여러 고정 프로젝트 관리 가능
- **커스텀 워크플로우**: 델리게이트 패턴으로 추가 편집 기능 확장 가능

## 🎉 완료 상태

✅ **모든 요구사항 구현 완료**
- 쿼리된 정보 표시: Shotgrid에서 시퀀스/샷 자동 로드
- 편집 가능: 더블클릭으로 드롭다운에서 선택/편집
- 고정 프로젝트: AXRD-296 자동 선택, 설정으로 변경 가능

**사용자는 이제 프로젝트 설정을 거의 신경 쓰지 않고, Shotgrid에서 쿼리된 시퀀스/샷 정보를 편리하게 편집할 수 있습니다.**
