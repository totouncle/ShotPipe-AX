# 📁 파일 처리 가이드

> AI 생성 파일들을 Shotgrid 업로드를 위해 체계적으로 처리하는 방법

## 🎯 파일 처리 개요

ShotPipe의 파일 처리는 다음 단계로 진행됩니다:

```
🔍 스캔 → 📝 분석 → 🏷️ 네이밍 → 🔧 메타데이터 → ✅ 검증
```

### 처리되는 내용
- **파일명 표준화**: `[시퀀스]_c001_[task]_v0001` 형식
- **메타데이터 추출**: 원본 파일 정보 보존
- **태스크 자동 할당**: 파일 형식 기반 자동 분류
- **버전 관리**: 중복 파일 자동 버전 증가
- **품질 검증**: 파일 무결성 및 규격 확인

---

## 📂 지원 파일 형식

### 🖼️ 이미지 파일
```
✅ 지원 형식:
- .png     (PNG - 투명도 지원)
- .jpg     (JPEG - 압축 이미지)
- .jpeg    (JPEG 확장자)
- .tiff    (TIFF - 고품질)
- .tif     (TIFF 확장자)
- .exr     (OpenEXR - HDR)
- .dpx     (DPX - 영화용)
- .hdr     (HDR - 고동적범위)

🎯 자동 태스크 할당:
- PNG/JPG → txtToImage (텍스트-이미지 생성)
- EXR/HDR → comp (컴포지팅)
- TIFF → lookdev (룩 개발)
```

### 🎬 비디오 파일
```
✅ 지원 형식:
- .mp4     (MP4 - 범용)
- .mov     (QuickTime - 프로용)
- .avi     (AVI - Windows)
- .mkv     (Matroska - 오픈소스)
- .mxf     (MXF - 방송용)
- .prores  (ProRes - Apple)

🎯 자동 태스크 할당:
- MP4/MOV → imgToVideo (이미지-비디오 변환)
- MXF → editorial (편집)
- ProRes → color (컬러 그레이딩)
```

### 🎨 3D 및 기타 파일
```
✅ 지원 형식:
- .ma/.mb  (Maya)
- .blend   (Blender)
- .fbx     (FBX - 범용 3D)
- .obj     (OBJ - 3D 모델)
- .psd     (Photoshop)
- .ai      (Illustrator)
- .nk      (Nuke)

🎯 자동 태스크 할당:
- Maya/Blender → modeling (모델링)
- FBX/OBJ → asset (에셋)
- PSD → matte (매트 페인팅)
- Nuke → comp (컴포지팅)
```

---

## 🔍 파일 스캔 및 분석

### 자동 스캔
```
1. 📂 "파일 처리" 탭에서 "폴더 선택"
2. 🎯 대상 폴더 선택
3. ⚙️ 스캔 옵션 설정:
   □ 하위 폴더 포함
   □ 숨김 파일 포함
   □ 링크 파일 따라가기
4. 🔍 "스캔 시작" 클릭
```

### 스캔 결과 분석
```
📊 스캔 완료 후 표시 정보:
- 총 파일 수
- 파일 형식별 분류
- 크기별 분포
- 처리 가능/불가능 파일
- 중복 파일 감지
- 오류 파일 목록
```

### 고급 스캔 옵션
```
⚙️ 필터 설정:
- 최소/최대 파일 크기
- 수정 날짜 범위
- 파일명 패턴
- 제외할 폴더

🔍 메타데이터 스캔:
- EXIF 정보 읽기
- 파일 생성 정보
- 수정 이력
- 카메라/소프트웨어 정보
```

---

## 🏷️ 파일명 규칙 및 네이밍

### 표준 네이밍 규칙
```
📝 기본 형식:
[시퀀스]_c[카메라]_[태스크]_v[버전].[확장자]

📋 예시:
원본: IMG_1234.png
변환: SEQ001_c001_txtToImage_v0001.png

원본: video_final.mp4
변환: SEQ002_c001_imgToVideo_v0001.mp4
```

### 시퀀스 자동 할당
```
🎯 할당 규칙:
1. 파일명에 숫자 패턴 감지
2. 폴더명에서 시퀀스 정보 추출
3. 수동 지정 가능
4. 기본값: SEQ001부터 순차 할당

📂 폴더 기반 시퀀스:
- /Project/seq010/ → SEQ010
- /Work/sequence_A/ → SEQA
- /Files/shot_100/ → SHOT100
```

### 카메라 번호 규칙
```
🎥 카메라 할당:
- 단일 파일: c001
- 다중 앵글: c001, c002, c003...
- 스테레오: cL (왼쪽), cR (오른쪽)
- 360도: c360

📸 특수 카메라:
- cMAIN: 메인 카메라
- cCLOSE: 클로즈업
- cWIDE: 와이드 샷
```

### 태스크 자동 분류
```
🎯 파일 형식별 자동 태스크:

이미지 파일:
- PNG/JPG → txtToImage
- EXR/HDR → comp
- TIFF → lookdev
- PSD → matte

비디오 파일:
- MP4/MOV → imgToVideo
- MXF → editorial
- ProRes → color

3D 파일:
- Maya/Blender → modeling
- FBX/OBJ → asset
- Nuke → comp

✏️ 수동 수정 가능:
처리 전 태스크 목록에서 변경 가능
```

### 버전 관리
```
🔢 버전 증가 규칙:
- 새 파일: v0001
- 동일 파일 재처리: v0002, v0003...
- 최대 버전: v9999

🔄 버전 감지:
1. 동일 시퀀스/카메라/태스크 검색
2. 기존 최고 버전 + 1
3. 수동 버전 지정 가능

📋 버전 이력:
- 각 버전별 처리 시간
- 원본 파일 경로
- 변경 사항 로그
- 메타데이터 차이
```

---

## 🔧 메타데이터 처리

### 추출되는 메타데이터
```
📷 이미지 메타데이터:
- 해상도 (너비 × 높이)
- 색상 깊이 (8bit, 16bit, 32bit)
- 색상 공간 (sRGB, Adobe RGB, etc.)
- 생성 날짜/시간
- 카메라 정보 (EXIF)
- 소프트웨어 정보

🎬 비디오 메타데이터:
- 해상도 및 종횡비
- 프레임 레이트 (23.98, 24, 25, 29.97, 30, 60)
- 코덱 정보
- 재생 시간
- 오디오 정보
- 생성 소프트웨어

🎨 3D 파일 메타데이터:
- 소프트웨어 버전
- 씬 정보
- 객체 수
- 텍스처 정보
- 라이팅 설정
```

### 메타데이터 보존
```
💾 원본 정보 보존:
- 원본 파일명
- 생성 경로
- 처리 이전 메타데이터
- 파일 해시값 (무결성 검증)

📝 추가 정보:
- 처리 일시
- ShotPipe 버전
- 처리 사용자
- 설정 정보
```

### 커스텀 메타데이터
```
✏️ 사용자 정의 필드:
- 프로젝트 이름
- 아티스트 이름
- 설명/노트
- 태그/키워드
- 우선순위
- 승인 상태

🔧 설정 방법:
1. "설정" → "메타데이터" 탭
2. "사용자 정의 필드" 추가
3. 기본값 설정
4. 자동 입력 규칙 설정
```

---

## ⚙️ 처리 옵션 및 설정

### 일괄 처리 설정
```
🔧 배치 처리 옵션:
- 배치 크기: 10-100개 (시스템 사양에 따라)
- 처리 순서: 이름순, 크기순, 날짜순
- 오류 처리: 건너뛰기/중단/재시도
- 진행 알림: 비프음/팝업/이메일

⚡ 성능 최적화:
- 멀티스레딩 활용
- 메모리 사용량 제한
- 임시 파일 관리
- 우선순위 설정
```

### 품질 검증 설정
```
✅ 자동 검증 항목:
- 파일 무결성 (손상 여부)
- 형식 유효성
- 메타데이터 완전성
- 크기 제한 준수
- 명명 규칙 준수

⚠️ 검증 실패 처리:
- 오류 로그 기록
- 별도 폴더로 이동
- 사용자 알림
- 재처리 대기열 추가
```

### 출력 설정
```
📁 출력 옵션:
- 원본 폴더 덮어쓰기
- 새 폴더 생성
- 날짜별 폴더 분류
- 태스크별 폴더 분류

🗂️ 폴더 구조:
processed/
├── 2024-01-15/
│   ├── txtToImage/
│   ├── imgToVideo/
│   └── comp/
└── backup/
    └── original/
```

---

## 🎛️ 고급 처리 기능

### 조건부 처리
```
🎯 조건 설정:
- 파일 크기 기준
- 해상도 기준
- 날짜 기준
- 파일명 패턴
- 메타데이터 조건

📋 액션 설정:
- 특정 태스크 할당
- 다른 폴더로 이동
- 처리 건너뛰기
- 알림 전송
```

### 템플릿 시스템
```
📋 네이밍 템플릿:
- 프로젝트별 템플릿
- 부서별 템플릿
- 커스텀 템플릿

🔧 템플릿 변수:
- {sequence}: 시퀀스 번호
- {shot}: 샷 번호
- {task}: 태스크 이름
- {version}: 버전 번호
- {date}: 처리 날짜
- {artist}: 아티스트 이름

📝 예시:
{project}_{sequence}_{shot}_{task}_v{version:04d}
→ DEMO_SEQ010_SHOT020_comp_v0001
```

### 스크립트 연동
```
🐍 Python 스크립트 실행:
- 처리 전/후 스크립트
- 커스텀 검증 로직
- 외부 도구 연동
- 자동 알림 시스템

🔌 API 연동:
- 다른 파이프라인 도구와 연동
- 데이터베이스 업데이트
- 클라우드 스토리지 동기화
- 알림 시스템 연동
```

---

## 📊 처리 결과 및 검토

### 처리 결과 확인
```
📋 결과 리포트:
- 처리 완료 파일 수
- 성공/실패 비율
- 처리 소요 시간
- 크기 변화
- 오류 목록

🔍 상세 검토:
- 개별 파일 상태
- 메타데이터 변화
- 품질 검증 결과
- 경고 및 권장사항
```

### 이력 관리
```
📚 처리 이력:
- 날짜별 처리 기록
- 사용자별 통계
- 오류 패턴 분석
- 성능 트렌드

💾 백업 및 복구:
- 원본 파일 백업
- 설정 백업
- 처리 결과 아카이브
- 복구 지점 생성
```

### 내보내기 및 공유
```
📤 결과 내보내기:
- Excel/CSV 리포트
- JSON 메타데이터
- 처리 로그
- 통계 차트

🔗 공유 옵션:
- 이메일 발송
- 클라우드 업로드
- 네트워크 공유
- API 전송
```

---

## 💡 베스트 프랙티스

### 효율적인 워크플로
```
✅ 권장 사항:
1. 일관된 폴더 구조 유지
2. 배치 크기 최적화 (20-50개)
3. 정기적인 설정 백업
4. 품질 검증 활성화
5. 처리 전 미리보기 확인

🎯 폴더 구조 예시:
project/
├── 01_input/        ← AI 생성 원본
├── 02_processing/   ← 처리 중
├── 03_processed/    ← 처리 완료
├── 04_upload/       ← 업로드 대기
└── 99_backup/       ← 백업
```

### 품질 관리
```
🔍 품질 체크리스트:
□ 파일 무결성 확인
□ 메타데이터 완전성
□ 명명 규칙 준수
□ 해상도/품질 적절성
□ 중복 파일 없음

⚠️ 주의사항:
- 원본 파일 항상 백업
- 네트워크 안정성 확인
- 충분한 디스크 공간
- 처리 중 다른 작업 최소화
```

### 문제 예방
```
🛡️ 예방 조치:
- 정기적인 시스템 점검
- 설정 파일 백업
- 로그 모니터링
- 성능 지표 추적

🔧 정기 유지보수:
□ 임시 파일 정리
□ 로그 아카이브
□ 설정 최적화
□ 업데이트 확인
```

---

## 🆘 문제 해결

### 일반적인 처리 오류
```
❌ 파일 형식 오류:
- 지원 형식 확인
- 파일 헤더 검증
- 코덱 설치 확인

❌ 권한 오류:
- 폴더 권한 확인
- 관리자 권한 실행
- 읽기 전용 해제

❌ 메모리 부족:
- 배치 크기 줄이기
- 다른 프로그램 종료
- 가상 메모리 증가
```

### 성능 문제 해결
```
🐌 처리 속도 개선:
- SSD 사용
- RAM 증설
- 백그라운드 프로그램 정리
- 배치 크기 조정

🔥 과열 방지:
- 적절한 휴식 시간
- 냉각 시스템 점검
- 처리량 조절
```

더 자세한 문제 해결은 [문제 해결 가이드](../troubleshooting/common-issues.md)를 참조하세요.

**효율적인 파일 처리로 더 나은 워크플로를 만들어보세요!** 🚀
